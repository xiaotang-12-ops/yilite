<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ product_info.name }} - è£…é…è¯´æ˜ä¹¦</title>
    <link rel="stylesheet" href="static/style.css">
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/examples/jsm/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>
</head>
<body>
    <header class="manual-header">
        <div class="container">
            <h1>{{ product_info.name }}</h1>
            <div class="product-meta">
                <span class="drawing-no">å›¾å·: {{ product_info.drawing_no }}</span>
                <span class="material">ä¸»æ: {{ product_info.material_grade }}</span>
            </div>
        </div>
    </header>

    <nav class="step-navigation">
        <div class="container">
            <div class="nav-buttons">
                <button id="prevBtn" class="nav-btn" disabled>ä¸Šä¸€æ­¥</button>
                <span id="stepCounter" class="step-counter">1 / {{ total_steps }}</span>
                <button id="nextBtn" class="nav-btn">ä¸‹ä¸€æ­¥</button>
            </div>
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
        </div>
    </nav>

    <main class="manual-content">
        <div class="container">
            <div class="content-grid">
                <!-- 3Dæ¨¡å‹æ˜¾ç¤ºåŒºåŸŸ -->
                <section class="model-viewer">
                    <div id="threejs-container" class="viewer-container">
                        <div id="loading-indicator" class="loading">
                            <div class="spinner"></div>
                            <p>æ­£åœ¨åŠ è½½3Dæ¨¡å‹...</p>
                        </div>
                    </div>
                    <div class="viewer-controls">
                        <button id="resetView" class="control-btn">é‡ç½®è§†è§’</button>
                        <button id="explodeToggle" class="control-btn">çˆ†ç‚¸è§†å›¾</button>
                        <input type="range" id="explodeSlider" min="0" max="1" step="0.01" value="0" class="explode-slider">
                    </div>
                </section>

                <!-- è£…é…æ­¥éª¤åŒºåŸŸ -->
                <section class="assembly-steps">
                    {% for step in assembly_steps %}
                    <div class="step-card" id="step-{{ step.step_number }}" {% if loop.first %}style="display: block;"{% else %}style="display: none;"{% endif %}>
                        <div class="step-header">
                            <h2>æ­¥éª¤ {{ step.step_number }}: {{ step.title }}</h2>
                            <span class="time-estimate">â±ï¸ {{ step.estimated_time }}åˆ†é’Ÿ</span>
                        </div>
                        
                        <div class="step-content">
                            <div class="description">
                                <h3>æ“ä½œè¯´æ˜</h3>
                                <p>{{ step.description }}</p>
                            </div>
                            
                            {% if step.parts_involved %}
                            <div class="parts-list">
                                <h3>æ¶‰åŠé›¶ä»¶</h3>
                                <ul>
                                    {% for part in step.parts_involved %}
                                    <li class="part-item">{{ part }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                            
                            {% if step.tools_required %}
                            <div class="tools-list">
                                <h3>æ‰€éœ€å·¥å…·</h3>
                                <ul>
                                    {% for tool in step.tools_required %}
                                    <li class="tool-item">ğŸ”§ {{ tool }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                            
                            {% if step.key_points %}
                            <div class="key-points">
                                <h3>å…³é”®è¦ç‚¹</h3>
                                <ul>
                                    {% for point in step.key_points %}
                                    <li class="key-point">ğŸ’¡ {{ point }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                            
                            {% if step.safety_notes %}
                            <div class="safety-notes">
                                <h3>å®‰å…¨æ³¨æ„</h3>
                                <ul>
                                    {% for note in step.safety_notes %}
                                    <li class="safety-note">âš ï¸ {{ note }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                            
                            {% if step.quality_check %}
                            <div class="quality-check">
                                <h3>è´¨é‡æ£€æŸ¥</h3>
                                <ul>
                                    {% for check in step.quality_check %}
                                    <li class="quality-item">âœ“ {{ check }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </section>
            </div>
        </div>
    </main>

    <footer class="manual-footer">
        <div class="container">
            <p>{{ generation_info.generator }} v{{ generation_info.version }}</p>
        </div>
    </footer>

    <script type="module" src="static/app.js"></script>
</body>
</html>